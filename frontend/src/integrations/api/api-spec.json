{"openapi":"3.0.0","paths":{"/test/student":{"get":{"operationId":"TestController_testStudent","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Test"]}},"/test/admin":{"get":{"operationId":"TestController_testAdmin","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Test"]}},"/test/{id}":{"post":{"description":"Test the logging & prisma error handling functionality","operationId":"TestController_test","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestBodyDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"summary":"Logging Test","tags":["Test"]}},"/users":{"post":{"description":"This operation creates both a user and a supabase auth account","operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserFullDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Create a new user","tags":["Users"]},"get":{"description":"Retrieves a paginated list of users based on the provided filter parameters.\n- **Access: ** Requires `ADMIN` role.\n- **Filtering & Pagination: ** Uses the `FilterUserDto` to define query parameters such as search terms, sorting, and page size.","operationId":"UsersController_findAll","parameters":[{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}},{"name":"role","required":false,"in":"query","schema":{"type":"string","enum":["student","mentor","admin"]}}],"responses":{"200":{"description":"List of users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedUsersDto"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Get users","tags":["Users"]}},"/users/student":{"post":{"description":"This operation creates both a user and a supabase auth account.\nIt also has additional properties for student-specific details.","operationId":"UsersController_createStudent","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserStudentDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Create a new student user","tags":["Users"]}},"/users/staff":{"post":{"description":"This operation creates both a user and a supabase auth account.\nIt also has additional properties for staff-specific details.","operationId":"UsersController_createStaff","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserStaffDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Create a new staff user","tags":["Users"]}},"/users/invite":{"post":{"description":"This operation creates both a user and a supabase auth account","operationId":"UsersController_inviteUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Invite a new user","tags":["Users"]}},"/users/me":{"get":{"description":"This endpoint returns the full profile of the currently authenticated user.\nThe structure of the returned object depends on the user's role:\n\n- `UserStudentDetailsDto` for users with the `student` role\n- `UserStaffDetailsDto` for users with the `mentor` or `admin` role","operationId":"UsersController_getMe","parameters":[],"responses":{"200":{"description":"Current user details fetched successfully","content":{"application/json":{"schema":{"type":"object","oneOf":[{"$ref":"#/components/schemas/UserStudentDetailsDto"},{"$ref":"#/components/schemas/UserStaffDetailsDto"}]}}}},"401":{"content":{"application/json":{"examples":{"UnauthorizedException":{"description":"Unauthorized","value":{"statusCode":401,"message":"Unauthorized","error":"Unauthorized"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":401},"message":{"type":"string","example":"Unauthorized"},"error":{"type":"string","example":"Unauthorized"}},"required":["statusCode","message"]}}},"description":""},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Get the currently authenticated user","tags":["Users"]},"put":{"description":"This operation updates the user details in the database","operationId":"UsersController_updateOwnUserDetails","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserBaseDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Update personal details","tags":["Users"]}},"/users/{id}/student":{"put":{"description":"This operation updates the user details in the database.\nThe user should have a student role.","operationId":"UsersController_updateUserStudentDetails","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserStudentDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Update student user details (Admin only)","tags":["Users"]}},"/users/{id}/staff":{"put":{"description":"This operation updates the user details in the database.\nThe user should have a mentor or admin role.","operationId":"UsersController_updateUserStaffDetails","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserStaffDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Update staff user details (Admin only)","tags":["Users"]}},"/users/{id}":{"get":{"description":"Retrieves a specific user by their unique identifier.\n- **Validation: ** Ensures the provided `id` is a valid identifier format.\n- **Not Found Handling: ** Throws an error if no matching user is found.","operationId":"UsersController_findOne","parameters":[],"responses":{"200":{"description":"User found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Get user by id","tags":["Users"]},"delete":{"description":"This endpoint performs either a soft delete or a permanent deletion of a user depending on the current state of the user or the query parameter provided:\n\n- If `directDelete` is true, the user is **permanently deleted** without checking if they are already softly deleted.\n- If `directDelete` is not provided or false:\n  - If the user is not yet softly deleted (`deletedAt` is null), a **soft delete** is performed by setting the `deletedAt` timestamp.\n  - If the user is already softly deleted, a **permanent delete** is executed.\n\nAll the user details and the supabase auth account will be deleted from the cloud on hard delete\n\nUse this endpoint to manage user deletion workflows flexibly through a single API.","operationId":"UsersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"directDelete","required":false,"in":"query","description":"If set to true, will skip the soft delete process","schema":{"type":"boolean"}}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","examples":["User has been soft deleted.","User has been permanently deleted."]}}}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Deletes a user (soft and hard delete)","tags":["Users"]}},"/users/{id}/status":{"patch":{"description":"This endpoint toggles the user's status between active and disabled\nby updating the `disabledAt` field. The change is also reflected in\nthe authentication provider's metadata.","operationId":"UsersController_updateUserStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User status updated successfully","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","examples":["User enabled successfully.","User disabled successfully."]}}}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Updates the status of a user (enable/disable).","tags":["Users"]}},"/courses":{"post":{"operationId":"CoursesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCourseDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Courses"]},"get":{"operationId":"CoursesController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Courses"]}},"/courses/{id}":{"get":{"operationId":"CoursesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Courses"]},"patch":{"operationId":"CoursesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCourseDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Courses"]},"delete":{"operationId":"CoursesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Courses"]}},"/auth/{uid}/metadata":{"get":{"description":"Retrieves the supabase auth account's metadata based on the uid given","operationId":"AuthController_getMetadata","parameters":[{"name":"uid","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthMetadataDto"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"If the uid provided is invalid","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","description":"If the uid provided is invalid","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"If an unexpected server error has occured","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","description":"If an unexpected server error has occured","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Get User Account Metadata","tags":["Auth"]}},"/auth/login":{"post":{"description":"Login via email & password","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCredentialsDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"401":{"content":{"application/json":{"examples":{"UnauthorizedException":{"description":"Unauthorized","value":{"statusCode":401,"message":"Unauthorized","error":"Unauthorized"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":401},"message":{"type":"string","example":"Unauthorized"},"error":{"type":"string","example":"Unauthorized"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Login Account","tags":["Auth"]}},"/billing":{"post":{"description":"Creates a new bill item and can optionally attach a user","operationId":"BillingController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBillingDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillDto"}}}},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Create a new bill","tags":["Billing"]},"get":{"description":"Fetch bills with the option to filter and sort them.\nContents of the returned list will depend on the user and their role.\nReturns a paginated response.","operationId":"BillingController_findAll","parameters":[{"name":"sortOrder","required":false,"in":"query","schema":{"default":"desc","type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}},{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"sort","required":false,"in":"query","schema":{"type":"string","enum":["status","amount","dueAt","createdAt"]}},{"name":"status","required":false,"in":"query","schema":{"type":"string","enum":["paid","unpaid","overpaid"]}},{"name":"type","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedBillsDto"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Fetch bills","tags":["Billing"]}},"/billing/{id}":{"get":{"description":"If the user is not an admin, they are only limited to querying their own bills.","operationId":"BillingController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillDto"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Fetch a single bill","tags":["Billing"]},"patch":{"description":"Change the bill's details","operationId":"BillingController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBillDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillDto"}}}},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Update bill data","tags":["Billing"]},"delete":{"description":"This endpoint performs either a soft delete or a permanent deletion of a bill depending on the current state of the nill or the query parameter provided:\n\n- If `directDelete` is true, the bill is **permanently deleted** without checking if they are already softly deleted.\n- If `directDelete` is not provided or false:\n  - If the bill is not yet softly deleted (`deletedAt` is null), a **soft delete** is performed by setting the `deletedAt` timestamp.\n  - If the bill is already softly deleted, a **permanent delete** is executed.","operationId":"BillingController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"summary":"Deletes a bill (temporary or permanent)","tags":["Billing"]}},"/billing/{billId}/payments/pay":{"post":{"description":"Handles the payment intent and payment gateway redirect of paymongo","operationId":"PaymentsController_pay","parameters":[{"name":"billId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitiatePaymentDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentResponseDto"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Initiate paymongo payment intent","tags":["Payments"]}},"/billing/{billId}/payments":{"post":{"description":"Creates a new payment item","operationId":"PaymentsController_create","parameters":[{"name":"billId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillPaymentDto"}}}},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Create a new payment","tags":["Payments"]},"get":{"description":"Fetch payments ordered by descending payment date\nContents of the returned list will depend on the user and their role.\nReturns a paginated response.","operationId":"PaymentsController_findAll","parameters":[{"name":"billId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BillPaymentDto"}}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Fetch payments","tags":["Payments"]}},"/billing/{billId}/payments/{id}":{"get":{"description":"If the user is not an admin, they are only limited to querying their own payments.","operationId":"PaymentsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillPaymentDto"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Fetch a single payment","tags":["Payments"]},"patch":{"description":"Change the payment's details","operationId":"PaymentsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBillPaymentDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillPaymentDto"}}}},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Update payment data","tags":["Payments"]},"delete":{"description":"This endpoint performs either a soft delete or a permanent deletion of a payment depending on the current state of the nill or the query parameter provided:\n\n- If `directDelete` is true, the payment is **permanently deleted** without checking if they are already softly deleted.\n- If `directDelete` is not provided or false:\n  - If the payment is not yet softly deleted (`deletedAt` is null), a **soft delete** is performed by setting the `deletedAt` timestamp.\n  - If the payment is already softly deleted, a **permanent delete** is executed.","operationId":"PaymentsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Deletes a payment (temporary or permanent)","tags":["Payments"]}},"/program":{"post":{"description":"This operation creates a new academic program.\nRequires `ADMIN` role.","operationId":"ProgramController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProgramDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Program"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Create a new program","tags":["Program"]},"get":{"description":"Retrieves a paginated list of programs based on the provided filters.\nRequires `ADMIN` role.","operationId":"ProgramController_findAll","parameters":[{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}}],"responses":{"200":{"description":"List of programs retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedProgramsDto"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Retrieve all programs","tags":["Program"]}},"/program/{id}":{"get":{"description":"Requires `ADMIN` role.","operationId":"ProgramController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Program retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Program"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Retrieve a specific program by ID","tags":["Program"]},"patch":{"description":"This operation updates the details of an existing program.\nRequires `ADMIN` role.","operationId":"ProgramController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProgramDto"}}}},"responses":{"200":{"description":"Program updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Program"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Update a program","tags":["Program"]},"delete":{"description":"This operation permanently deletes a program from the system.\nRequires `ADMIN` role.","operationId":"ProgramController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"directDelete","required":false,"in":"query","description":"If set to true, will skip the soft delete process","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Program deleted successfully","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","example":"Program has been permanently deleted."}}}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Delete a program","tags":["Program"]}},"/chatbot":{"post":{"operationId":"ChatbotController_prompt","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotResponseDto"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"security":[{"bearer":[]}],"tags":["Chatbot"]}},"/major":{"post":{"description":"This operation creates a new academic major.\nRequries `ADMIN` role.","operationId":"MajorController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMajorDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Major"}}}},"409":{"content":{"application/json":{"examples":{"ConflictException #1":{"description":"Conflict","value":{"statusCode":409,"message":"Conflict","error":"Conflict"}},"ConflictException #2":{"description":"Conflict","value":{"statusCode":409,"message":"Conflict","error":"Conflict"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":409},"message":{"type":"string","example":"Conflict"},"error":{"type":"string","example":"Conflict"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Creates a major.","tags":["Major"]},"get":{"description":"Retrives a paginated list of majors based on the provided filters.\nRequires `ADMIN` role.","operationId":"MajorController_findAll","parameters":[{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedMajorsDto"}}}},"400":{"content":{"application/json":{"examples":{"BadRequestException":{"description":"Bad Request","value":{"statusCode":400,"message":"Bad Request","error":"Bad Request"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Bad Request"},"error":{"type":"string","example":"Bad Request"}},"required":["statusCode","message"]}}},"description":""},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Retrive all majors","tags":["Major"]}},"/major/{id}":{"get":{"description":"Requires `ADMIN` role.","operationId":"MajorController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Major"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Retrieve a specific major by ID","tags":["Major"]},"patch":{"description":"This operation updates the details of an existing major.\nRequires `ADMIN` role.","operationId":"MajorController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMajorDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Major"}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"409":{"content":{"application/json":{"examples":{"ConflictException":{"description":"Conflict","value":{"statusCode":409,"message":"Conflict","error":"Conflict"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":409},"message":{"type":"string","example":"Conflict"},"error":{"type":"string","example":"Conflict"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Update a major","tags":["Major"]},"delete":{"description":"This operation permanently deletes a major from the system.\nRequires `ADMIN` role.","operationId":"MajorController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"directDelete","required":false,"in":"query","description":"If set to true, will skip the soft delete process","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"properties":{"message":{"type":"string","example":"Major has been permanently deleted."}}}}}},"404":{"content":{"application/json":{"examples":{"NotFoundException":{"description":"Not Found","value":{"statusCode":404,"message":"Not Found","error":"Not Found"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":404},"message":{"type":"string","example":"Not Found"},"error":{"type":"string","example":"Not Found"}},"required":["statusCode","message"]}}},"description":""},"500":{"content":{"application/json":{"examples":{"InternalServerErrorException":{"description":"Internal Server Error","value":{"statusCode":500,"message":"Internal Server Error","error":"Internal Server Error"}}},"schema":{"type":"object","properties":{"statusCode":{"type":"number","example":500},"message":{"type":"string","example":"Internal Server Error"},"error":{"type":"string","example":"Internal Server Error"}},"required":["statusCode","message"]}}},"description":""}},"summary":"Delete a major","tags":["Major"]}}},"info":{"title":"API","description":"Description","version":"1.0","contact":{}},"tags":[{"name":"api","description":""}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"TestBodyNestDto":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]},"TestBodyDto":{"type":"object","properties":{"id":{"type":"number","description":"The id shit"},"nested":{"$ref":"#/components/schemas/TestBodyNestDto"}},"required":["id","nested"]},"Role":{"type":"string","enum":["student","mentor","admin"]},"CreateUserDto":{"type":"object","properties":{"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"}},"required":["firstName","lastName"]},"UserCredentialsDto":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string"}},"required":["email"]},"CreateUserDetailsDto":{"type":"object","properties":{"dateJoined":{"type":"string","format":"date-time"},"dob":{"type":"string","nullable":true,"format":"date-time"},"gender":{"type":"string","nullable":true}},"required":["dateJoined"]},"CreateUserFullDto":{"type":"object","properties":{"role":{"allOf":[{"$ref":"#/components/schemas/Role"}]},"user":{"$ref":"#/components/schemas/CreateUserDto"},"credentials":{"$ref":"#/components/schemas/UserCredentialsDto"},"userDetails":{"$ref":"#/components/schemas/CreateUserDetailsDto"}},"required":["role","user","credentials"]},"User":{"type":"object","properties":{"id":{"type":"string"},"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"allOf":[{"$ref":"#/components/schemas/Role"}]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"disabledAt":{"type":"string","nullable":true,"format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","firstName","middleName","lastName","role","createdAt","updatedAt","disabledAt","deletedAt"]},"StudentType":{"type":"string","enum":["new","regular","irregular","transfer","returnee","graduate","special"]},"CreateStudentDetailsDto":{"type":"object","properties":{"studentNumber":{"type":"integer","format":"int32"},"studentType":{"allOf":[{"$ref":"#/components/schemas/StudentType"}]},"admissionDate":{"type":"string","format":"date-time"},"otherDetails":{"type":"object"}},"required":["studentNumber","studentType","admissionDate","otherDetails"]},"CreateUserStudentDto":{"type":"object","properties":{"specificDetails":{"$ref":"#/components/schemas/CreateStudentDetailsDto"},"user":{"$ref":"#/components/schemas/CreateUserDto"},"credentials":{"$ref":"#/components/schemas/UserCredentialsDto"},"userDetails":{"$ref":"#/components/schemas/CreateUserDetailsDto"}},"required":["specificDetails","user","credentials"]},"StaffRole":{"type":"string","enum":["mentor","admin"]},"CreateStaffDetailsDto":{"type":"object","properties":{"employeeNumber":{"type":"integer","format":"int32"},"department":{"type":"string"},"position":{"type":"string"},"otherDetails":{"type":"object"}},"required":["employeeNumber","department","position","otherDetails"]},"CreateUserStaffDto":{"type":"object","properties":{"role":{"allOf":[{"$ref":"#/components/schemas/StaffRole"}]},"specificDetails":{"$ref":"#/components/schemas/CreateStaffDetailsDto"},"user":{"$ref":"#/components/schemas/CreateUserDto"},"credentials":{"$ref":"#/components/schemas/UserCredentialsDto"},"userDetails":{"$ref":"#/components/schemas/CreateUserDetailsDto"}},"required":["role","specificDetails","user","credentials"]},"InviteUserDto":{"type":"object","properties":{"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"allOf":[{"$ref":"#/components/schemas/Role"}]},"email":{"type":"string","format":"email"}},"required":["firstName","lastName","role","email"]},"UserDetailsDto":{"type":"object","properties":{"id":{"type":"string"},"dateJoined":{"type":"string","format":"date-time"},"dob":{"type":"string","nullable":true,"format":"date-time"},"gender":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","dateJoined","dob","gender","createdAt","updatedAt","deletedAt"]},"UserDetailsFullDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string","nullable":true},"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"type":"string","enum":["student","mentor","admin"]},"userDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserDetailsDto"}]}},"required":["id","email","firstName","middleName","lastName","role","userDetails"]},"StudentDetailsDto":{"type":"object","properties":{"id":{"type":"string"},"studentNumber":{"type":"integer","format":"int32"},"studentType":{"allOf":[{"$ref":"#/components/schemas/StudentType"}]},"admissionDate":{"type":"string","format":"date-time"},"otherDetails":{"type":"object"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","studentNumber","studentType","admissionDate","otherDetails","createdAt","updatedAt","deletedAt"]},"UserStudentDetailsDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string","nullable":true},"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"type":"string","enum":["student","mentor","admin"]},"userDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserDetailsDto"}]},"studentDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/StudentDetailsDto"}]}},"required":["id","email","firstName","middleName","lastName","role","userDetails","studentDetails"]},"StaffDetailsDto":{"type":"object","properties":{"id":{"type":"string"},"employeeNumber":{"type":"integer","format":"int32"},"department":{"type":"string"},"position":{"type":"string"},"otherDetails":{"type":"object"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","employeeNumber","department","position","otherDetails","createdAt","updatedAt","deletedAt"]},"UserStaffDetailsDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string","nullable":true},"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"type":"string","enum":["student","mentor","admin"]},"userDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserDetailsDto"}]},"staffDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/StaffDetailsDto"}]}},"required":["id","email","firstName","middleName","lastName","role","userDetails","staffDetails"]},"UpdateStudentDetailsDto":{"type":"object","properties":{"studentNumber":{"type":"integer","format":"int32"},"studentType":{"allOf":[{"$ref":"#/components/schemas/StudentType"}]},"admissionDate":{"type":"string","format":"date-time"},"otherDetails":{"type":"object"}}},"UpdateUserDto":{"type":"object","properties":{"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"}}},"UpdateUserDetailsDto":{"type":"object","properties":{"dateJoined":{"type":"string","format":"date-time"},"dob":{"type":"string","nullable":true,"format":"date-time"},"gender":{"type":"string","nullable":true}}},"UpdateUserStudentDto":{"type":"object","properties":{"specificDetails":{"$ref":"#/components/schemas/UpdateStudentDetailsDto"},"user":{"$ref":"#/components/schemas/UpdateUserDto"},"userDetails":{"$ref":"#/components/schemas/UpdateUserDetailsDto"}}},"UpdateStaffDetailsDto":{"type":"object","properties":{"employeeNumber":{"type":"integer","format":"int32"},"department":{"type":"string"},"position":{"type":"string"},"otherDetails":{"type":"object"}}},"UpdateUserStaffDto":{"type":"object","properties":{"specificDetails":{"$ref":"#/components/schemas/UpdateStaffDetailsDto"},"user":{"$ref":"#/components/schemas/UpdateUserDto"},"userDetails":{"$ref":"#/components/schemas/UpdateUserDetailsDto"}}},"UpdateUserBaseDto":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UpdateUserDto"},"userDetails":{"$ref":"#/components/schemas/UpdateUserDetailsDto"}}},"PaginationMetaDto":{"type":"object","properties":{"isFirstPage":{"type":"boolean","example":true},"isLastPage":{"type":"boolean","example":true},"currentPage":{"type":"number","example":1},"previousPage":{"type":"number","nullable":true,"example":null},"nextPage":{"type":"number","nullable":true,"example":null},"pageCount":{"type":"number","example":1},"totalCount":{"type":"number","example":42}},"required":["isFirstPage","isLastPage","currentPage","previousPage","nextPage","pageCount","totalCount"]},"UserAccountDto":{"type":"object","properties":{"id":{"type":"string"},"authUid":{"type":"string"},"email":{"type":"string","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","authUid","email","createdAt","updatedAt","deletedAt"]},"UserWithRelations":{"type":"object","properties":{"id":{"type":"string"},"firstName":{"type":"string"},"middleName":{"type":"string","nullable":true},"lastName":{"type":"string"},"role":{"allOf":[{"$ref":"#/components/schemas/Role"}]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"disabledAt":{"type":"string","nullable":true,"format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"},"userAccount":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserAccountDto"}]},"userDetails":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/UserDetailsDto"}]}},"required":["id","firstName","middleName","lastName","role","createdAt","updatedAt","disabledAt","deletedAt","userAccount","userDetails"]},"PaginatedUsersDto":{"type":"object","properties":{"meta":{"additionalProperties":true,"nullable":false,"allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]},"users":{"type":"array","items":{"$ref":"#/components/schemas/UserWithRelations"}}},"required":["meta","users"]},"CreateCourseDto":{"type":"object","properties":{}},"UpdateCourseDto":{"type":"object","properties":{}},"UserStatus":{"type":"string","enum":["active","disabled","deleted"]},"AuthMetadataDto":{"type":"object","properties":{"role":{"allOf":[{"$ref":"#/components/schemas/Role"}]},"status":{"allOf":[{"$ref":"#/components/schemas/UserStatus"}]},"user_id":{"type":"string"}}},"BillStatus":{"type":"string","enum":["paid","unpaid","overpaid"]},"CreateBillDtoNoBreakdown":{"type":"object","properties":{"invoiceId":{"type":"string"},"payerName":{"type":"string"},"payerEmail":{"type":"string"},"billType":{"type":"string"},"status":{"allOf":[{"$ref":"#/components/schemas/BillStatus"}]},"receivableAmount":{"type":"string","format":"Decimal.js"},"receiptedAmount":{"type":"string","format":"Decimal.js"},"outstandingAmount":{"type":"string","format":"Decimal.js"},"dueAt":{"type":"string","format":"date-time"},"issuedAt":{"type":"string","format":"date-time"}},"required":["invoiceId","payerName","payerEmail","billType","status","receivableAmount","receiptedAmount","outstandingAmount","dueAt","issuedAt"]},"BillingCostBreakdown":{"type":"object","properties":{"cost":{"type":"string","format":"Decimal.js"},"name":{"type":"string"},"category":{"type":"string"}},"required":["cost","name","category"]},"CreateBillingDto":{"type":"object","properties":{"bill":{"$ref":"#/components/schemas/CreateBillDtoNoBreakdown"},"costBreakdown":{"type":"array","items":{"$ref":"#/components/schemas/BillingCostBreakdown"}},"userId":{"type":"string","format":"uuid"}},"required":["bill","costBreakdown"]},"BillDto":{"type":"object","properties":{"id":{"type":"string"},"invoiceId":{"type":"string"},"payerName":{"type":"string"},"payerEmail":{"type":"string"},"billType":{"type":"string"},"status":{"allOf":[{"$ref":"#/components/schemas/BillStatus"}]},"receivableAmount":{"type":"string","format":"Decimal.js"},"receiptedAmount":{"type":"string","format":"Decimal.js"},"outstandingAmount":{"type":"string","format":"Decimal.js"},"dueAt":{"type":"string","format":"date-time"},"issuedAt":{"type":"string","format":"date-time"},"costBreakdown":{"type":"object"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","invoiceId","payerName","payerEmail","billType","status","receivableAmount","receiptedAmount","outstandingAmount","dueAt","issuedAt","costBreakdown","createdAt","updatedAt","deletedAt"]},"PaginatedBillsDto":{"type":"object","properties":{"bills":{"type":"array","items":{"$ref":"#/components/schemas/BillDto"}},"meta":{"type":"object"}},"required":["bills","meta"]},"UpdateBillDto":{"type":"object","properties":{"invoiceId":{"type":"string"},"payerName":{"type":"string"},"payerEmail":{"type":"string"},"billType":{"type":"string"},"status":{"allOf":[{"$ref":"#/components/schemas/BillStatus"}]},"receivableAmount":{"type":"string","format":"Decimal.js"},"receiptedAmount":{"type":"string","format":"Decimal.js"},"outstandingAmount":{"type":"string","format":"Decimal.js"},"dueAt":{"type":"string","format":"date-time"},"issuedAt":{"type":"string","format":"date-time"},"costBreakdown":{"type":"object"}}},"InitiatePaymentDto":{"type":"object","properties":{"description":{"type":"string"},"statementDescriptor":{"type":"string"},"amount":{"type":"number"}},"required":["amount"]},"PaymentIntentAttributesDto":{"type":"object","properties":{"amount":{"type":"number"},"capture_type":{"type":"string"},"client_key":{"type":"string"},"created_at":{"type":"number"},"currency":{"type":"string"},"description":{"type":"string"},"last_payment_error":{"type":"string","nullable":true},"livemode":{"type":"boolean"},"metadata":{"type":"object","nullable":true},"next_action":{"type":"object","nullable":true},"original_amount":{"type":"number"},"payment_method_allowed":{"type":"array","items":{"type":"string"}},"payment_method_options":{"type":"object","nullable":true},"payments":{"type":"array","items":{"type":"object"}},"setup_future_usage":{"type":"string","nullable":true},"statement_descriptor":{"type":"string"},"status":{"type":"string"},"updated_at":{"type":"number"}},"required":["amount","capture_type","client_key","created_at","currency","description","livemode","original_amount","payment_method_allowed","payments","statement_descriptor","status","updated_at"]},"PaymentIntentDataDto":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"attributes":{"$ref":"#/components/schemas/PaymentIntentAttributesDto"}},"required":["id","type","attributes"]},"PaymentIntentResponseDto":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/PaymentIntentDataDto"}},"required":["data"]},"CreateBillPaymentDto":{"type":"object","properties":{"amountPaid":{"type":"string","format":"Decimal.js"},"paymentType":{"type":"string"},"notes":{"type":"string"},"paymentDate":{"type":"string","format":"date-time"},"paymongoData":{"type":"object","nullable":true}},"required":["amountPaid","paymentType","notes","paymentDate"]},"CreatePaymentDto":{"type":"object","properties":{"payment":{"$ref":"#/components/schemas/CreateBillPaymentDto"},"description":{"type":"string"},"statementDescriptor":{"type":"string"}},"required":["payment"]},"BillPaymentDto":{"type":"object","properties":{"id":{"type":"string"},"amountPaid":{"type":"string","format":"Decimal.js"},"paymentType":{"type":"string"},"notes":{"type":"string"},"paymentDate":{"type":"string","format":"date-time"},"paymongoData":{"type":"object","nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","amountPaid","paymentType","notes","paymentDate","paymongoData","createdAt","updatedAt","deletedAt"]},"UpdateBillPaymentDto":{"type":"object","properties":{"amountPaid":{"type":"string","format":"Decimal.js"},"paymentType":{"type":"string"},"notes":{"type":"string"},"paymentDate":{"type":"string","format":"date-time"},"paymongoData":{"type":"object","nullable":true}}},"CreateProgramDto":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"}},"required":["code","name","description"]},"Program":{"type":"object","properties":{"id":{"type":"string"},"code":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","code","name","description","createdAt","updatedAt","deletedAt"]},"ProgramDto":{"type":"object","properties":{"id":{"type":"string"},"code":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","code","name","description","createdAt","updatedAt","deletedAt"]},"PaginatedProgramsDto":{"type":"object","properties":{"meta":{"additionalProperties":true,"nullable":false,"allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]},"programs":{"type":"array","items":{"$ref":"#/components/schemas/ProgramDto"}}},"required":["meta","programs"]},"UpdateProgramDto":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"}}},"Turn":{"type":"object","properties":{"role":{"enum":["user","model"],"type":"string"},"content":{"type":"string"}},"required":["role","content"]},"PromptDto":{"type":"object","properties":{"question":{"type":"string"},"sessionHistory":{"type":"array","items":{"$ref":"#/components/schemas/Turn"}}},"required":["question","sessionHistory"]},"ChatbotResponseDto":{"type":"object","properties":{"response":{"type":"string"}},"required":["response"]},"CreateMajorDto":{"type":"object","properties":{"major":{"$ref":"#/components/schemas/CreateMajorDto"},"programId":{"type":"string","format":"uuid"}},"required":["major","programId"]},"Major":{"type":"object","properties":{"id":{"type":"string"},"programId":{"type":"string"},"courses":{"type":"array","items":{"$ref":"#/components/schemas/Course"}},"name":{"type":"string"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","programId","name","description","createdAt","updatedAt","deletedAt"]},"Course":{"type":"object","properties":{"id":{"type":"string"},"major":{"type":"array","items":{"$ref":"#/components/schemas/Major"}},"prereqs":{"type":"array","items":{"$ref":"#/components/schemas/Course"}},"prereqFor":{"type":"array","items":{"$ref":"#/components/schemas/Course"}},"coreqs":{"type":"array","items":{"$ref":"#/components/schemas/Course"}},"coreqFor":{"type":"array","items":{"$ref":"#/components/schemas/Course"}},"courseCode":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"year":{"type":"string"},"semester":{"type":"string"},"units":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","courseCode","name","description","year","semester","units","createdAt","updatedAt","deletedAt"]},"MajorDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"deletedAt":{"type":"string","nullable":true,"format":"date-time"}},"required":["id","name","description","createdAt","updatedAt","deletedAt"]},"PaginatedMajorsDto":{"type":"object","properties":{"meta":{"additionalProperties":true,"nullable":false,"allOf":[{"$ref":"#/components/schemas/PaginationMetaDto"}]},"majors":{"type":"array","items":{"$ref":"#/components/schemas/MajorDto"}}},"required":["meta","majors"]},"UpdateMajorDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}}